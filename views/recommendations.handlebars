<div class="header">
	<a href="/"><img id="logo" src="/images/logo.png" alt=""></a>

	<input id="url" onkeypress="if( event.keyCode == 13 ) recommendedTracks()" name="url" type="text" placeholder="SoundCloud Playlist URL" autofocus>

	<a id="about" href="/about">About</a>
</div>
<div class="content">
	<ul>
		{{#if error}}
			<li>
				<div class="notfound">Could not find any tracks at the given URL</div>
			</li>
		{{/if}}
		
		<script type="application/javascript">
			(function () {
				//Retrieve the list of track IDs
				var tracks = [{{tracks}}];
				var container = document.querySelector(".content ul");
				//If there are tracks, render em
				if (tracks.length > 0) {
					renderTrack(0);
				}

				//Render a given track (and add an onload to render the next track)
				function renderTrack(i) {
					var trackLi = document.createElement("li");
					trackLi.innerHTML = "<iframe width='100%' height='150' scrolling='no' frameborder='no' src='https://w.soundcloud.com/player/?url=https%3A//api.soundcloud.com/tracks/" + 
						tracks[i] +  "&amp;auto_play=false&amp;hide_related=true&amp;show_comments=false&amp;show_user=true&amp;show_reposts=false&amp;visual=true'></iframe>";
					container.appendChild(trackLi);
					if (i + 1 < tracks.length) {
						trackLi.firstChild.addEventListener("load", function () {
							renderTrack(i + 1);
						});
					}
				}
			} ());
		</script>

	</ul>
</div>
